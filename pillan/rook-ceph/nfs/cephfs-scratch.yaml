---
apiVersion: ceph.rook.io/v1
kind: CephFilesystem
metadata:
  name: scratch
  namespace: rook-ceph
spec:
  metadataPool:
    failureDomain: host
    replicated:
      size: 3
    quotas:
      maxSize: 10Gi
  dataPools:
    - failureDomain: host
      replicated:
        size: 3
      quotas:
        maxSize: 2Ti
  metadataServer:
    activeCount: 3
    activeStandby: true
  preserveFilesystemOnDelete: false
---
apiVersion: ceph.rook.io/v1
kind: CephNFS
metadata:
  name: scratch
  namespace: rook-ceph
spec:
  rados:
    pool: scratch-data0
    # RADOS namespace where NFS client recovery data is stored in the pool.
    namespace: nfs-ns
  server:
    active: 1
---
apiVersion: v1
kind: Service
metadata:
  labels:
    app: rook-ceph-nfs
    ceph_daemon_id: a
    ceph_daemon_type: nfs
    ceph_nfs: scratch
    instance: a
    nfs: a
    rook_cluster: rook-ceph
  name: rook-ceph-nfs-scratch
  namespace: rook-ceph
spec:
  ports:
    - name: nfs
      port: 2049
      protocol: TCP
      targetPort: 2049
  selector:
    app: rook-ceph-nfs
    ceph_daemon_id: a
    ceph_daemon_type: nfs
    ceph_nfs: scratch
    instance: a
    nfs: a
    rook_cluster: rook-ceph
  type: LoadBalancer
